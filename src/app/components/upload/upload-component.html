<div class="upload-container">
  <!-- Configuration Form -->
  <div class="config-form">
    <div class="form-group">
      <input
        type="text"
        [(ngModel)]="user"
        placeholder="User"
        class="form-input"
      />
    </div>
    <div class="form-group">
      <input
        type="text"
        [(ngModel)]="workflowVarName"
        placeholder="Workflow Variable Name"
        class="form-input"
      />
    </div>
    <div class="form-group">
      <input
        type="text"
        [(ngModel)]="workflowId"
        placeholder="Workflow ID"
        class="form-input"
      />
    </div>
  </div>

  <!-- Upload Card -->
  <div class="upload-card">
    <div class="upload-card-content">
      <div 
        class="upload-zone"
        [class.drag-active]="isDragOver() && !hasUploadedFile() && !isProcessing()"
        [class.has-file]="hasUploadedFile()"
        [class.loading]="isProcessing()"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)"
      >
        <!-- Hidden File Input -->
        <input
          #fileInput
          id="file-upload"
          type="file"
          accept=".pdf,.docx,.doc,.txt"
          (change)="onFileSelect($event)"
          class="file-input"
          [disabled]="isProcessing()"
        />

        @if (hasUploadedFile() && uploadedFiles()[0]) {
          <!-- File Preview -->
          <div class="file-preview">
            <div class="file-icon-container">
              {{ getFileIcon(uploadedFiles()[0].file.name) }}
            </div>
            <span class="file-name">{{ uploadedFiles()[0].file.name }}</span>
            <span class="file-size">
              {{ formatFileSize(uploadedFiles()[0].file.size) }}
            </span>
            @if (isProcessing()) {
              <div class="processing-indicator">
                Processing document...
              </div>
            } @else {
              <button 
                (click)="removeFile()" 
                class="remove-button"
                type="button"
              >
                Remove
              </button>
            }
          </div>
        } @else {
          <!-- Upload Prompt -->
          <div class="upload-prompt">
            <div class="upload-icon">üìÅ</div>
            <h3 class="upload-title">Upload Document</h3>
            <p class="upload-description">
              Drag and drop your file here or click to browse
            </p>
            <p class="upload-formats">
              Supports PDF, DOCX, and TXT files
            </p>
            <button 
              (click)="fileInput.click()"
              class="select-file-button"
              [disabled]="isProcessing()"
              type="button"
            >
              Select File
            </button>
          </div>
        }
      </div>
    </div>
  </div>

  <!-- Upload Button -->
  @if (hasUploadedFile()) {
    <div class="upload-actions">
      <button 
        class="upload-document-button"
        (click)="handleFileUpload()"
        type="button"
        [disabled]="!canUpload()"
      >
        Upload Document
      </button>
    </div>
  }

  <!-- Analysis Results -->
  @if (analysisResult()) {
    <div class="analysis-section">
      <div class="analysis-header">
        <h3>ü§ñ Analysis Results</h3>
      </div>
      <div class="analysis-content">
        <pre>{{ analysisResult() }}</pre>
      </div>
    </div>
  }
</div>