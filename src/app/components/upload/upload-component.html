<div class="upload-container">
  <div class="upload-header">
    <h2>üì§ Document Upload</h2>
    <p>Upload and process documents with external API</p>
  </div>

  <!-- Configuration Section -->
  <div class="config-section">
    <div class="config-header">
      <h3>‚öôÔ∏è Configuration</h3>
    </div>
    <div class="config-form">
      <div class="form-group">
        <label for="user">User:</label>
        <input
          id="user"
          type="text"
          [(ngModel)]="user"
          placeholder="User"
          class="form-input"
        />
      </div>
      <div class="form-group">
        <label for="workflowVarName">Workflow Variable Name:</label>
        <input
          id="workflowVarName"
          type="text"
          [(ngModel)]="workflowVarName"
          placeholder="Workflow Variable Name"
          class="form-input"
        />
      </div>
      <div class="form-group">
        <label for="workflowId">Workflow ID:</label>
        <input
          id="workflowId"
          type="text"
          [(ngModel)]="workflowId"
          placeholder="Workflow ID"
          class="form-input"
        />
      </div>
    </div>
  </div>

  <!-- Upload Zone -->
  <div 
    class="upload-zone"
    [class.drag-over]="isDragOver() && !hasUploadedFile() && !isProcessing()"
    [class.disabled]="hasUploadedFile() || isProcessing()"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    (click)="onUploadZoneClick()"
  >
    <div class="upload-content">
      @if (!hasUploadedFile()) {
        <div class="upload-icon">üìÅ</div>
        <h3>Drag and drop your file here</h3>
        <p>or click to browse</p>
        <div class="supported-formats">
          <span class="format-badge">PDF</span>
          <span class="format-badge">DOCX</span>
          <span class="format-badge">TXT</span>
        </div>
      } @else {
        @if (uploadedFiles()[0]) {
          <div class="file-preview">
            <span class="file-icon-large">{{ getFileIcon(uploadedFiles()[0].file.name) }}</span>
            <div class="file-details">
              <div class="file-name">{{ uploadedFiles()[0].file.name }}</div>
              <div class="file-size">{{ formatFileSize(uploadedFiles()[0].file.size) }}</div>
              @if (isProcessing()) {
                <div class="processing-text">Processing document...</div>
              }
            </div>
            @if (!isProcessing()) {
              <button 
                class="remove-btn-inline"
                (click)="removeFile()"
                type="button"
                title="Remove file"
              >
                ‚úï
              </button>
            }
          </div>
        }
      }
    </div>
  </div>

  <!-- Hidden File Input -->
  <input
    #fileInput
    type="file"
    accept=".pdf,.docx,.doc,.txt"
    (change)="onFileSelect($event)"
    style="display: none;"
  />

  <!-- Upload Button -->
  @if (hasUploadedFile()) {
    <div class="upload-actions">
      <button 
        class="upload-btn"
        (click)="handleFileUpload()"
        type="button"
        [disabled]="!canUpload()"
      >
        @if (isProcessing()) {
          üîÑ Processing...
        } @else {
          üì§ Upload Document
        }
      </button>
    </div>
  }

  <!-- Analysis Results -->
  @if (analysisResult()) {
    <div class="analysis-section">
      <div class="analysis-header">
        <h3>ü§ñ Analysis Results</h3>
      </div>
      <div class="analysis-content">
        <pre>{{ analysisResult() }}</pre>
      </div>
    </div>
  }
</div>